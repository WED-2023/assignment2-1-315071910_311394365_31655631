"use strict";(self["webpackChunkassignment_2_1"]=self["webpackChunkassignment_2_1"]||[]).push([[680],{4680:(e,t,r)=>{r.r(t),r.d(t,{default:()=>m});r(8309);var n=function(){var e=this,t=e._self._c;return t("div",[t("br"),e.recipe.title?t("div",{staticClass:"preparation-container"},[t("h1",{staticClass:"recipe-title"},[e._v(e._s(e.recipe.title))]),t("img",{staticClass:"recipe-image",attrs:{src:e.recipe.image||e.defaultImage,alt:"Recipe Image"}}),t("div",{staticClass:"recipe-summary",domProps:{innerHTML:e._s(e.recipe.summary)}}),t("br"),t("div",{staticClass:"progress-bar-container"},[t("ul",{staticClass:"steps-progress"},e._l(e.steps,(function(r,n){return t("li",{key:n,class:{active:e.currentStepIndex===n,completed:e.currentStepIndex>n},on:{click:function(t){return e.goToStep(n)}}},[t("span",[e.currentStepIndex>n?[e._v("âœ“")]:[e._v(e._s(n+1))]],2),t("p",{class:{"current-step":e.currentStepIndex===n}},[e._v("Step "+e._s(n+1))])])})),0)]),t("div",{staticClass:"servings-selector"},[t("label",{attrs:{for:"servings"}},[e._v("Serving:")]),t("input",{directives:[{name:"model",rawName:"v-model.number",value:e.servings,expression:"servings",modifiers:{number:!0}}],attrs:{type:"number",id:"servings",min:"1"},domProps:{value:e.servings},on:{change:e.updateIngredients,input:function(t){t.target.composing||(e.servings=e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}})]),t("div",{staticClass:"content-container"},[t("div",{staticClass:"ingredients-equipment"},[e.currentStep.ingredients&&e.currentStep.ingredients.length?t("div",{staticClass:"ingredients"},[t("h3",[e._v("Ingredients:")]),t("ul",e._l(e.mappedIngredients,(function(r){return t("li",{key:r.id},[t("img",{staticClass:"item-image",attrs:{src:r.image||e.defaultImage,alt:"Ingredient Image"}}),t("span",[e._v(e._s(r.amount)+" "+e._s(r.unit)+" "+e._s(r.name))])])})),0)]):e._e(),e.currentStep.equipment&&e.currentStep.equipment.length?t("div",{staticClass:"equipment"},[t("h3",[e._v("Equipment:")]),t("ul",e._l(e.currentStep.equipment,(function(r){return t("li",{key:r.id},[t("img",{staticClass:"item-image",attrs:{src:r.image||e.defaultImage,alt:"Equipment Image"}}),t("span",[e._v(e._s(r.name))])])})),0)]):e._e()]),t("div",{staticClass:"step-details"},[t("h3",[e._v("Step "+e._s(e.currentStep.number)+":")]),t("p",[e._v(e._s(e.currentStep.step))])]),t("div",{staticClass:"navigation-buttons"},[t("button",{attrs:{disabled:0===e.currentStepIndex},on:{click:e.prevStep}},[e._v("Prev")]),e.currentStepIndex<e.steps.length-1?t("button",{on:{click:e.nextStep}},[e._v("Next")]):t("button",{on:{click:e.completePreparation}},[e._v("Done")])])])]):t("div",[t("p",[e._v("Loading...")])]),t("br")])},s=[],i=r(3144),a=r(124),c=r(8534),u=(r(2222),r(9554),r(1539),r(4747),r(1249),r(6977),r(7658),r(9826),r(9669)),o=r.n(u);const p={data:function(){return{recipe:{title:"",image:"",readyInMinutes:0,popularity:0,vegan:!1,vegetarian:!1,glutenFree:!1,ingredients:[],instructions:[{steps:[]}],summary:""},servings:1,currentStepIndex:0,currentStepCompleted:!1,defaultImage:"https://cdn.icon-icons.com/icons2/2436/PNG/512/recipe_cutlery_spoon_fork_icon_147447.png"}},created:function(){var e=this;return(0,c.Z)((0,a.Z)().mark((function t(){return(0,a.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.$route.params.recipeId){t.next=5;break}return t.next=3,e.fetchRecipe(e.$route.params.recipeId);case 3:return t.next=5,e.fetchCurrentStep(e.$route.params.recipeId);case 5:case"end":return t.stop()}}),t)})))()},watch:{"$route.params.recipeId":"fetchRecipe"},methods:{fetchRecipe:function(e){var t=this;return(0,c.Z)((0,a.Z)().mark((function r(){var n;return(0,a.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(r.prev=0,t.axios.defaults.withCredentials=!0,"number"!==typeof e){r.next=8;break}return r.next=5,o().get("".concat(t.$root.store.server_domain,"/recipes/").concat(e,"/formatted"));case 5:n=r.sent,r.next=11;break;case 8:return r.next=10,o().get("".concat(t.$root.store.server_domain,"/users/my_recipes/").concat(e));case 10:n=r.sent;case 11:t.recipe=n.data,t.servings=t.recipe.servings,t.recipe.ingredients.forEach((function(e){e.originalAmount=e.amount})),t.updateIngredients(),t.axios.defaults.withCredentials=!1,r.next=21;break;case 18:r.prev=18,r.t0=r["catch"](0),console.log(r.t0);case 21:case"end":return r.stop()}}),r,null,[[0,18]])})))()},fetchCurrentStep:function(e){var t=this;return(0,c.Z)((0,a.Z)().mark((function r(){var n;return(0,a.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,o().get("".concat(t.$root.store.server_domain,"/users/meal_plan/").concat(e,"/step"),{withCredentials:!0});case 3:n=r.sent,t.currentStepIndex=n.data.step||0,r.next=10;break;case 7:r.prev=7,r.t0=r["catch"](0),console.error("Error fetching current step:",r.t0);case 10:case"end":return r.stop()}}),r,null,[[0,7]])})))()},nextStep:function(){this.currentStepIndex<this.steps.length-1&&(this.currentStepIndex+=1,this.currentStepCompleted=!1,this.saveCurrentStep())},prevStep:function(){this.currentStepIndex>0&&(this.currentStepIndex-=1,this.currentStepCompleted=!1,this.saveCurrentStep())},goToStep:function(e){this.currentStepIndex=e,this.currentStepCompleted=!1,this.saveCurrentStep()},updateIngredients:function(){var e=this.servings/this.recipe.servings;this.recipe.ingredients=this.recipe.ingredients.map((function(t){var r=t.originalAmount*e;return(0,i.Z)((0,i.Z)({},t),{},{amount:r.toFixed(2)})}))},saveCurrentStep:function(){var e=this;return(0,c.Z)((0,a.Z)().mark((function t(){var r;return(0,a.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.$route.params.recipeId,r){t.next=4;break}return console.error("Recipe ID is undefined!"),t.abrupt("return");case 4:return t.prev=4,t.next=7,o().post("".concat(e.$root.store.server_domain,"/users/meal_plan/").concat(r,"/step/").concat(e.currentStepIndex),{withCredentials:!0});case 7:return t.next=9,o().post("".concat(e.$root.store.server_domain,"/users/meal_plan/").concat(r,"/progress/").concat(e.currentStepIndex/e.steps.length),{withCredentials:!0});case 9:t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](4),console.error("Error saving current step and progress:",t.t0);case 14:case"end":return t.stop()}}),t,null,[[4,11]])})))()},completePreparation:function(){var e=this;return(0,c.Z)((0,a.Z)().mark((function t(){return(0,a.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.currentStepIndex=e.steps.length,e.saveCurrentStep(),t.prev=2,t.next=5,o().post("".concat(e.$root.store.server_domain,"/users/meal_plan/").concat(e.$route.params.recipeId,"/2"),{},{withCredentials:!0});case 5:recipe.status=e.getRecipeStatusText("1"),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](2),console.error("Error updating recipe status:",t.t0);case 11:alert("Preparation complete!"),e.$router.push({name:"meal-plan"});case 13:case"end":return t.stop()}}),t,null,[[2,8]])})))()}},computed:{steps:function(){var e;return(null===(e=this.recipe.instructions[0])||void 0===e?void 0:e.steps)||[]},currentStep:function(){return this.steps[this.currentStepIndex]||{}},mappedIngredients:function(){var e=this;return this.currentStep.ingredients?this.currentStep.ingredients.map((function(t){var r=e.recipe.ingredients.find((function(e){return e.name===t.name}));return(0,i.Z)((0,i.Z)({},t),{},{amount:r?r.amount:"",unit:r?r.unit:""})})):[]}}},l=p;var d=r(1001),v=(0,d.Z)(l,n,s,!1,null,"2955be9a",null);const m=v.exports},3189:(e,t,r)=>{var n=r(9303),s=r(1340),i=r(4488),a=RangeError;e.exports=function(e){var t=s(i(this)),r="",c=n(e);if(c<0||c==1/0)throw a("Wrong number of repetitions");for(;c>0;(c>>>=1)&&(t+=t))1&c&&(r+=t);return r}},6977:(e,t,r)=>{var n=r(2109),s=r(1702),i=r(9303),a=r(863),c=r(3189),u=r(7293),o=RangeError,p=String,l=Math.floor,d=s(c),v=s("".slice),m=s(1..toFixed),g=function(e,t,r){return 0===t?r:t%2===1?g(e,t-1,r*e):g(e*e,t/2,r)},h=function(e){var t=0,r=e;while(r>=4096)t+=12,r/=4096;while(r>=2)t+=1,r/=2;return t},f=function(e,t,r){var n=-1,s=r;while(++n<6)s+=t*e[n],e[n]=s%1e7,s=l(s/1e7)},_=function(e,t){var r=6,n=0;while(--r>=0)n+=e[r],e[r]=l(n/t),n=n%t*1e7},x=function(e){var t=6,r="";while(--t>=0)if(""!==r||0===t||0!==e[t]){var n=p(e[t]);r=""===r?n:r+d("0",7-n.length)+n}return r},S=u((function(){return"0.000"!==m(8e-5,3)||"1"!==m(.9,0)||"1.25"!==m(1.255,2)||"1000000000000000128"!==m(0xde0b6b3a7640080,0)}))||!u((function(){m({})}));n({target:"Number",proto:!0,forced:S},{toFixed:function(e){var t,r,n,s,c=a(this),u=i(e),l=[0,0,0,0,0,0],m="",S="0";if(u<0||u>20)throw o("Incorrect fraction digits");if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return p(c);if(c<0&&(m="-",c=-c),c>1e-21)if(t=h(c*g(2,69,1))-69,r=t<0?c*g(2,-t,1):c/g(2,t,1),r*=4503599627370496,t=52-t,t>0){f(l,0,r),n=u;while(n>=7)f(l,1e7,0),n-=7;f(l,g(10,n,1),0),n=t-1;while(n>=23)_(l,1<<23),n-=23;_(l,1<<n),f(l,1,1),_(l,2),S=x(l)}else f(l,0,r),f(l,1<<-t,0),S=x(l)+d("0",u);return u>0?(s=S.length,S=m+(s<=u?"0."+d("0",u-s)+S:v(S,0,s-u)+"."+v(S,s-u))):S=m+S,S}})}}]);
//# sourceMappingURL=680.6b01c8bb.js.map