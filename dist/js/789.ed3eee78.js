"use strict";(self["webpackChunkassignment_2_1"]=self["webpackChunkassignment_2_1"]||[]).push([[789],{9789:(e,r,t)=>{t.r(r),t.d(r,{default:()=>x});var a=function(){var e=this,r=e._self._c;return r("div",[r("br"),r("h1",{staticClass:"title"},[e._v("Meal Planning")]),r("div",{staticClass:"meal-planning-container"},[e.isLoading?r("div",{staticClass:"loading-container"},[r("div",{staticClass:"loading-spinner"}),r("div",{staticClass:"loading-text"},[e._v("Loading...")])]):r("div",[e.mealRecipes.length?r("div",{staticClass:"meal-recipes"},[e._l(e.mealRecipes,(function(t,a){return r("div",{key:t.id,staticClass:"meal-recipe",class:{dragging:e.draggingIndex===a},attrs:{draggable:"true"},on:{dragstart:function(r){return e.onDragStart(a,r)},dragover:function(r){return e.onDragOver(r)},drop:function(r){return e.onDrop(a)},dragend:e.onDragEnd}},[r("div",{staticClass:"meal-recipe-content"},[r("div",{staticClass:"meal-recipe-image-container"},[r("img",{staticClass:"meal-recipe-photo",attrs:{src:t.image,alt:"Recipe Photo"}})]),r("div",{staticClass:"meal-recipe-details"},[r("div",{staticClass:"meal-recipe-header"},[r("span",{staticClass:"meal-recipe-number"},[e._v(e._s(a+1)+". "+e._s(t.title))]),r("button",{staticClass:"remove-btn",on:{click:function(r){return e.removeRecipeFromMeal(t.id)}}},[e._v("Ã—")])]),r("span",{staticClass:"meal-recipe-time"},[r("i",{staticClass:"fas fa-clock"}),e._v(" "+e._s(t.readyInMinutes)+" Minutes")]),r("div",{staticClass:"meal-recipe-status",class:e.getStatusClass(t.status)},[r("span",[e._v(e._s(t.status))]),r("i",{class:e.getStatusIcon(t.status)})]),r("div",{staticClass:"progress-bar-container"},[r("progress-bar",{attrs:{progress:Math.floor(t.progress)}})],1),r("router-link",{staticClass:"start-preparation",attrs:{to:{name:"RecipePreparation",params:{recipeId:t.id}}}},[r("i",{staticClass:"fas fa-play-circle"}),e._v(" Start Preparation ")])],1)])])})),r("button",{staticClass:"clear-meal-btn",on:{click:e.showClearMealModal}},[e._v("Clear All Recipes From Meal Plan")])],2):r("div",{staticClass:"no-recipes"},[e._v("No recipes added to the meal plan yet.")])])]),r("b-modal",{attrs:{id:"clear-meal-modal"},on:{ok:e.clearMeal},scopedSlots:e._u([{key:"modal-title",fn:function(){return[e._v("Clear Meal Plan")]},proxy:!0}])},[e._v(" Are you sure you want to clear all recipes from the meal plan? ")])],1)},s=[],n=t(3144),i=t(124),c=t(8534),o=(t(1249),t(2707),t(2772),t(7327),t(1539),t(8862),t(561),t(9669)),l=t.n(o),u=function(){var e=this,r=e._self._c;return r("div",{staticClass:"progress-bar"},[r("div",{class:["progress-bar-fill",e.progressColor],style:{width:e.progress+"%"}}),r("span",{staticClass:"progress-bar-text"},[e._v(e._s(e.progress)+"%")])])},p=[];t(9653);const d={props:{progress:{type:Number,required:!0}},computed:{progressColor:function(){return this.progress>=75?"progress-bar-high":this.progress>=50?"progress-bar-medium":"progress-bar-low"}}},g=d;var m=t(1001),f=(0,m.Z)(g,u,p,!1,null,"3c009240",null);const v=f.exports,h={name:"MealPlanning",components:{ProgressBar:v},data:function(){return{mealRecipes:[],draggingIndex:null,isLoading:!0}},mounted:function(){var e=this;return(0,c.Z)((0,i.Z)().mark((function r(){return(0,i.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.getRecipes();case 2:case"end":return r.stop()}}),r)})))()},methods:{getRecipes:function(){var e=this;return(0,c.Z)((0,i.Z)().mark((function r(){var t,a;return(0,i.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,l().get("".concat(e.$root.store.server_domain,"/users/meal_plan"),{withCredentials:!0,headers:{"Cache-Control":"no-cache",Pragma:"no-cache",Expires:"0"}});case 3:t=r.sent,e.mealRecipes=t.data.map((function(r){return(0,n.Z)((0,n.Z)({},r),{},{time:r.time||0,status:e.getRecipeStatusText(r.status),progress:r.progress||0})})),a=JSON.parse(localStorage.getItem("mealRecipesOrder")),a&&(e.mealRecipes=e.mealRecipes.sort((function(e,r){return a.indexOf(e.id)-a.indexOf(r.id)}))),r.next=12;break;case 9:r.prev=9,r.t0=r["catch"](0),console.error("Error fetching meal recipes:",r.t0);case 12:return r.prev=12,e.isLoading=!1,r.finish(12);case 15:case"end":return r.stop()}}),r,null,[[0,9,12,15]])})))()},removeRecipeFromMeal:function(e){var r=this;return(0,c.Z)((0,i.Z)().mark((function t(){var a;return(0,i.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r.mealRecipes=r.mealRecipes.filter((function(r){return r.id!==e})),t.prev=1,t.next=4,l()["delete"]("".concat(r.$root.store.server_domain,"/users/meal_plan"),{data:{recipeId:String(e)},withCredentials:!0});case 4:t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](1),console.error("Error removing recipe from meal plan:",t.t0);case 9:a=r.mealRecipes.map((function(e){return e.id})),localStorage.setItem("mealRecipesOrder",JSON.stringify(a));case 11:case"end":return t.stop()}}),t,null,[[1,6]])})))()},clearMeal:function(){var e=this;return(0,c.Z)((0,i.Z)().mark((function r(){return(0,i.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,l()["delete"]("".concat(e.$root.store.server_domain,"/users/meal_plan/all"),{withCredentials:!0});case 3:e.mealRecipes=[],localStorage.removeItem("mealRecipesOrder"),r.next=10;break;case 7:r.prev=7,r.t0=r["catch"](0),console.error("Error clearing meal plan:",r.t0);case 10:case"end":return r.stop()}}),r,null,[[0,7]])})))()},showClearMealModal:function(){this.$bvModal.show("clear-meal-modal")},onDragStart:function(e,r){this.draggingIndex=e,r.dataTransfer.effectAllowed="move"},onDragOver:function(e){e.preventDefault()},onDrop:function(e){if(e!==this.draggingIndex){var r=this.mealRecipes[this.draggingIndex];this.mealRecipes.splice(this.draggingIndex,1),this.mealRecipes.splice(e,0,r),this.draggingIndex=null;var t=this.mealRecipes.map((function(e){return e.id}));localStorage.setItem("mealRecipesOrder",JSON.stringify(t))}},onDragEnd:function(){this.draggingIndex=null},getStatusClass:function(e){switch(e){case"Wait For Processing":return"status-wait";case"In Process":return"status-process";case"Complete!":return"status-ready";default:return""}},getStatusIcon:function(e){switch(e){case"Wait For Processing":return"fas fa-clock";case"In Process":return"fas fa-spinner";case"Complete!":return"fas fa-check-circle";default:return""}},getRecipeStatusText:function(e){switch(e){case"0":return"Wait For Processing";case"1":return"In Process";case"2":return"Complete!";default:return"Wait For Processing"}}}},C=h;var _=(0,m.Z)(C,a,s,!1,null,"6cdd9917",null);const x=_.exports}}]);
//# sourceMappingURL=789.ed3eee78.js.map