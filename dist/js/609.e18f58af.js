(self["webpackChunkassignment_2_1"]=self["webpackChunkassignment_2_1"]||[]).push([[609],{5609:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>g});r(8309);var n=function(){var e=this,t=e._self._c;return t("div",[t("br"),e.loading?t("div",{staticClass:"loading-container"},[t("div",{staticClass:"spinner"}),t("p",{staticClass:"loading-text"},[e._v("Loading...")])]):t("div",[e.recipe.title?t("div",{staticClass:"preparation-container"},[t("h1",{staticClass:"recipe-title"},[e._v(e._s(e.recipe.title))]),t("img",{staticClass:"recipe-image",attrs:{src:e.recipe.image||e.defaultImage,alt:"Recipe Image"},on:{error:e.handleImageError}}),t("div",{staticClass:"recipe-summary",domProps:{innerHTML:e._s(e.recipe.summary)}}),t("br"),t("div",{staticClass:"progress-bar-container"},[t("ul",{staticClass:"steps-progress"},e._l(e.steps,(function(r,n){return t("li",{key:n,class:{active:e.currentStepIndex===n,completed:e.currentStepIndex>n},on:{click:function(t){return e.goToStep(n)}}},[t("span",[e.currentStepIndex>n?[e._v("âœ“")]:[e._v(e._s(n+1))]],2),t("p",{class:{"current-step":e.currentStepIndex===n}},[e._v("Step "+e._s(n+1))])])})),0)]),t("div",{staticClass:"servings-selector"},[t("label",{attrs:{for:"servings"}},[e._v("Serving:")]),t("input",{directives:[{name:"model",rawName:"v-model.number",value:e.servings,expression:"servings",modifiers:{number:!0}}],attrs:{type:"number",id:"servings",min:"1"},domProps:{value:e.servings},on:{change:e.updateIngredients,input:function(t){t.target.composing||(e.servings=e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}})]),t("div",{staticClass:"content-container"},[t("div",{staticClass:"ingredients-equipment"},[e.currentStep.ingredients&&e.currentStep.ingredients.length?t("div",{staticClass:"ingredients"},[t("h3",[e._v("Ingredients:")]),t("ul",e._l(e.mappedIngredients,(function(r){return t("li",{key:r.id},[t("img",{staticClass:"item-image",attrs:{src:e.getIngredientImageUrl(r.image),alt:"Ingredient Image"},on:{error:e.handleImageError}}),t("span",[e._v(e._s(r.amount)+" "+e._s(r.unit)+" "+e._s(r.name))])])})),0)]):e._e(),e.currentStep.equipment&&e.currentStep.equipment.length?t("div",{staticClass:"equipment"},[t("h3",[e._v("Equipment:")]),t("ul",e._l(e.currentStep.equipment,(function(r){return t("li",{key:r.id},[t("img",{staticClass:"item-image",attrs:{src:r.image,alt:"Equipment Image"},on:{error:e.handleImageError}}),t("span",[e._v(e._s(r.name))])])})),0)]):e._e()]),t("div",{staticClass:"step-details"},[t("h3",[e._v("Step "+e._s(e.currentStep.number)+":")]),t("p",[e._v(e._s(e.currentStep.step))])]),t("div",{staticClass:"navigation-buttons"},[t("button",{attrs:{disabled:0===e.currentStepIndex},on:{click:e.prevStep}},[e._v("Prev")]),e.currentStepIndex<e.steps.length-1?t("button",{on:{click:e.nextStep}},[e._v("Next")]):t("button",{on:{click:e.completePreparation}},[e._v("Done")])])])]):t("div",[t("div",{staticClass:"no-recipe-found-container"},[t("img",{staticClass:"no-recipe-icon",attrs:{src:"https://cdn.icon-icons.com/icons2/1378/PNG/512/avatardefault_92824.png",alt:"No Recipe"}}),t("h2",{staticClass:"no-recipe-title"},[e._v("Oops! Recipe Not Found")]),t("p",{staticClass:"no-recipe-message"},[e._v("We couldn't find the recipe you're looking for. Try searching for another recipe or check back later.")]),t("router-link",{staticClass:"back-home-link",attrs:{to:"/"}},[e._v("Go Back to Home")])],1)])]),t("br")])},i=[],s=r(3144),a=r(124),c=r(8534),o=(r(2222),r(9554),r(1539),r(4747),r(1249),r(6977),r(7658),r(9826),r(9669)),u=r.n(o);const p={data:function(){return{recipe:{title:"",image:"",readyInMinutes:0,popularity:0,vegan:!1,vegetarian:!1,glutenFree:!1,ingredients:[],instructions:[{steps:[]}],summary:""},servings:1,currentStepIndex:0,defaultImage:"https://cdn.icon-icons.com/icons2/2436/PNG/512/recipe_cutlery_spoon_fork_icon_147447.png",loading:!0}},created:function(){var e=this;return(0,c.Z)((0,a.Z)().mark((function t(){return(0,a.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.$route.params.recipeId){t.next=5;break}return t.next=3,e.fetchRecipe(e.$route.params.recipeId);case 3:return t.next=5,e.fetchCurrentStep(e.$route.params.recipeId);case 5:e.loading=!1;case 6:case"end":return t.stop()}}),t)})))()},methods:{fetchRecipe:function(e){var t=this;return(0,c.Z)((0,a.Z)().mark((function r(){var n;return(0,a.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(r.prev=0,"number"!==typeof e){r.next=7;break}return r.next=4,u().get("".concat(t.$root.store.server_domain,"/recipes/").concat(e,"/formatted"));case 4:n=r.sent,r.next=16;break;case 7:if("FAMILY"!==e.substring(0,6)){r.next=13;break}return r.next=10,u().get("".concat(t.$root.store.server_domain,"/recipes/FAMILY/").concat(e,"/formatted"));case 10:n=r.sent,r.next=16;break;case 13:return r.next=15,u().get("".concat(t.$root.store.server_domain,"/users/my_recipes/").concat(e));case 15:n=r.sent;case 16:t.recipe=n.data,t.servings=t.recipe.servings,t.recipe.ingredients.forEach((function(e){e.originalAmount=e.amount})),t.updateIngredients(),r.next=25;break;case 22:r.prev=22,r.t0=r["catch"](0),console.error("Error fetching recipe:",r.t0);case 25:case"end":return r.stop()}}),r,null,[[0,22]])})))()},fetchCurrentStep:function(e){var t=this;return(0,c.Z)((0,a.Z)().mark((function r(){var n;return(0,a.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,u().get("".concat(t.$root.store.server_domain,"/users/meal_plan/").concat(e,"/step"),{withCredentials:!0});case 3:n=r.sent,t.currentStepIndex=n.data.step||0,r.next=10;break;case 7:r.prev=7,r.t0=r["catch"](0),console.error("Error fetching current step:",r.t0);case 10:case"end":return r.stop()}}),r,null,[[0,7]])})))()},nextStep:function(){this.currentStepIndex<this.steps.length-1&&(this.currentStepIndex+=1,this.saveCurrentStep())},prevStep:function(){this.currentStepIndex>0&&(this.currentStepIndex-=1,this.saveCurrentStep())},goToStep:function(e){this.currentStepIndex=e,this.saveCurrentStep()},updateIngredients:function(){var e=this.servings/this.recipe.servings;this.recipe.ingredients=this.recipe.ingredients.map((function(t){var r=t.originalAmount*e;return(0,s.Z)((0,s.Z)({},t),{},{amount:r.toFixed(2)})}))},saveCurrentStep:function(){var e=this;return(0,c.Z)((0,a.Z)().mark((function t(){var r;return(0,a.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.$route.params.recipeId,r){t.next=4;break}return console.error("Recipe ID is undefined!"),t.abrupt("return");case 4:return t.prev=4,t.next=7,u().post("".concat(e.$root.store.server_domain,"/users/meal_plan/").concat(r,"/step/").concat(e.currentStepIndex),{withCredentials:!0});case 7:return t.next=9,u().post("".concat(e.$root.store.server_domain,"/users/meal_plan/").concat(r,"/progress/").concat(e.currentStepIndex/e.steps.length),{withCredentials:!0});case 9:t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](4),console.error("Error saving current step and progress:",t.t0);case 14:case"end":return t.stop()}}),t,null,[[4,11]])})))()},completePreparation:function(){var e=this;return(0,c.Z)((0,a.Z)().mark((function t(){return(0,a.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.currentStepIndex=e.steps.length,e.saveCurrentStep(),alert("Preparation complete!"),e.$router.push({name:"meal-plan"});case 4:case"end":return t.stop()}}),t)})))()},handleImageError:function(e){e.target.src=this.defaultImage},getIngredientImageUrl:function(e){var t="https://spoonacular.com/cdn/ingredients_100x100/";return"".concat(t).concat(e)}},computed:{steps:function(){var e;return(null===(e=this.recipe.instructions[0])||void 0===e?void 0:e.steps)||[]},currentStep:function(){return this.steps[this.currentStepIndex]||{}},mappedIngredients:function(){var e=this;return this.currentStep.ingredients?this.currentStep.ingredients.map((function(t){var r=e.recipe.ingredients.find((function(e){return e.name===t.name}));return(0,s.Z)((0,s.Z)({},t),{},{amount:r?r.amount:"",unit:r?r.unit:""})})):[]}}},l=p;var d=r(1001),v=(0,d.Z)(l,n,i,!1,null,"5578aa30",null);const g=v.exports},8709:(e,t,r)=>{"use strict";var n=r(9670),i=r(2140),s=TypeError;e.exports=function(e){if(n(this),"string"===e||"default"===e)e="string";else if("number"!==e)throw s("Incorrect hint");return i(this,e)}},3189:(e,t,r)=>{"use strict";var n=r(9303),i=r(1340),s=r(4488),a=RangeError;e.exports=function(e){var t=i(s(this)),r="",c=n(e);if(c<0||c==1/0)throw a("Wrong number of repetitions");for(;c>0;(c>>>=1)&&(t+=t))1&c&&(r+=t);return r}},7327:(e,t,r)=>{"use strict";var n=r(2109),i=r(2092).filter,s=r(1194),a=s("filter");n({target:"Array",proto:!0,forced:!a},{filter:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},6078:(e,t,r)=>{var n=r(2597),i=r(8052),s=r(8709),a=r(5112),c=a("toPrimitive"),o=Date.prototype;n(o,c)||i(o,c,s)},6977:(e,t,r)=>{"use strict";var n=r(2109),i=r(1702),s=r(9303),a=r(863),c=r(3189),o=r(7293),u=RangeError,p=String,l=Math.floor,d=i(c),v=i("".slice),g=i(1..toFixed),f=function(e,t,r){return 0===t?r:t%2===1?f(e,t-1,r*e):f(e*e,t/2,r)},m=function(e){var t=0,r=e;while(r>=4096)t+=12,r/=4096;while(r>=2)t+=1,r/=2;return t},h=function(e,t,r){var n=-1,i=r;while(++n<6)i+=t*e[n],e[n]=i%1e7,i=l(i/1e7)},b=function(e,t){var r=6,n=0;while(--r>=0)n+=e[r],e[r]=l(n/t),n=n%t*1e7},_=function(e){var t=6,r="";while(--t>=0)if(""!==r||0===t||0!==e[t]){var n=p(e[t]);r=""===r?n:r+d("0",7-n.length)+n}return r},x=o((function(){return"0.000"!==g(8e-5,3)||"1"!==g(.9,0)||"1.25"!==g(1.255,2)||"1000000000000000128"!==g(0xde0b6b3a7640080,0)}))||!o((function(){g({})}));n({target:"Number",proto:!0,forced:x},{toFixed:function(e){var t,r,n,i,c=a(this),o=s(e),l=[0,0,0,0,0,0],g="",x="0";if(o<0||o>20)throw u("Incorrect fraction digits");if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return p(c);if(c<0&&(g="-",c=-c),c>1e-21)if(t=m(c*f(2,69,1))-69,r=t<0?c*f(2,-t,1):c/f(2,t,1),r*=4503599627370496,t=52-t,t>0){h(l,0,r),n=o;while(n>=7)h(l,1e7,0),n-=7;h(l,f(10,n,1),0),n=t-1;while(n>=23)b(l,1<<23),n-=23;b(l,1<<n),h(l,1,1),b(l,2),x=_(l)}else h(l,0,r),h(l,1<<-t,0),x=_(l)+d("0",o);return o>0?(i=x.length,x=g+(i<=o?"0."+d("0",o-i)+x:v(x,0,i-o)+"."+v(x,i-o))):x=g+x,x}})},3321:(e,t,r)=>{var n=r(2109),i=r(9781),s=r(6048).f;n({target:"Object",stat:!0,forced:Object.defineProperties!==s,sham:!i},{defineProperties:s})},5003:(e,t,r)=>{var n=r(2109),i=r(7293),s=r(5656),a=r(1236).f,c=r(9781),o=!c||i((function(){a(1)}));n({target:"Object",stat:!0,forced:o,sham:!c},{getOwnPropertyDescriptor:function(e,t){return a(s(e),t)}})},9337:(e,t,r)=>{var n=r(2109),i=r(9781),s=r(3887),a=r(5656),c=r(1236),o=r(6135);n({target:"Object",stat:!0,sham:!i},{getOwnPropertyDescriptors:function(e){var t,r,n=a(e),i=c.f,u=s(n),p={},l=0;while(u.length>l)r=i(n,t=u[l++]),void 0!==r&&o(p,t,r);return p}})},7941:(e,t,r)=>{var n=r(2109),i=r(7908),s=r(1956),a=r(7293),c=a((function(){s(1)}));n({target:"Object",stat:!0,forced:c},{keys:function(e){return s(i(e))}})},6649:(e,t,r)=>{var n=r(6800),i=r(6532);n("toPrimitive"),i()},3144:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});r(7941),r(2526),r(7327),r(1539),r(5003),r(7658),r(9554),r(4747),r(9337),r(3321),r(9070);var n=r(3336);r(6649),r(6078),r(1817),r(1703),r(6647),r(9653);function i(e,t){if("object"!==(0,n.Z)(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==(0,n.Z)(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function s(e){var t=i(e,"string");return"symbol"===(0,n.Z)(t)?t:String(t)}function a(e,t,r){return t=s(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}}}]);
//# sourceMappingURL=609.e18f58af.js.map