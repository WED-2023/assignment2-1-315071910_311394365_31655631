(()=>{var e={5124:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var a=function(){var e=this,t=e._self._c;return t("router-link",{staticClass:"recipe-preview",attrs:{to:{name:"recipe",params:{recipeId:e.recipe.id}}}},[t("div",{staticClass:"recipe-body"},[e.watched?t("div",{staticClass:"watched-ribbon"},[t("i",{staticClass:"fas fa-eye watched-icon"}),t("span",{staticClass:"watched-text"},[e._v("Watched")])]):e._e(),e.image_load?t("img",{staticClass:"recipe-image",attrs:{src:e.recipe.image,alt:"Recipe Image"},on:{load:e.onImageLoad,error:e.onImageError}}):t("div",{staticClass:"image-placeholder"},[t("i",{staticClass:"fas fa-spinner fa-pulse placeholder-icon"})]),e.$root.store.username?t("div",{staticClass:"favorite-icon-container",on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.toggleFavorite.apply(null,arguments)}}},[t("i",{class:e.favorite?"fas fa-heart favorite-icon active":"far fa-heart favorite-icon"})]):e._e(),e.glutenFree||e.vegetarian||e.vegan?t("div",{staticClass:"dietary-tabs"},[e.glutenFree?t("div",{staticClass:"dietary-icon-container"},[t("img",{staticClass:"dietary-icon-gluten",attrs:{src:"https://findvectorlogo.com/wp-content/uploads/2018/06/gluten-free-vector-logo.png",alt:"Gluten-Free"}})]):e._e(),e.vegetarian?t("div",{staticClass:"dietary-icon-container"},[t("img",{staticClass:"dietary-icon-vegetarian",attrs:{src:"https://github.com/WED-2023/assignment2-1-315071910_311394365_31655631/blob/main/photos/pngwing.com.png?raw=true",alt:"Vegetarian"}})]):e._e(),e.vegan?t("div",{staticClass:"dietary-icon-container"},[t("img",{staticClass:"dietary-icon-vegan",attrs:{src:"https://uxwing.com/wp-content/themes/uxwing/download/food-and-drinks/vegan-icon.png",alt:"Vegan"}})]):e._e()]):e._e()]),t("div",{staticClass:"recipe-footer"},[t("div",{staticClass:"recipe-title",attrs:{title:e.recipe.title}},[e._v(" "+e._s(e.recipe.title)+" ")]),t("ul",{staticClass:"recipe-overview"},[t("li",[t("img",{staticClass:"icon",attrs:{src:"https://banner2.cleanpng.com/20180604/kwx/kisspng-computer-icons-time-attendance-clocks-font-aweso-clock-icon-5b14c6364f6622.2216713915280881183252.jpg",alt:"Time"}}),e._v(" "+e._s(e.recipe.readyInMinutes)+" minutes ")]),t("li",[t("img",{staticClass:"icon_like",attrs:{src:"https://w7.pngwing.com/pngs/116/409/png-transparent-social-media-computer-icons-like-button-thumb-signal-social-networking-service-like-rectangle-social-media-marketing-black-thumbnail.png",alt:"Likes"}}),e._v(" "+e._s(e.recipe.popularity)+" likes ")])])])])},n=[],i=r(124),s=r(8534),o=(r(3161),r(9653),r(1539),r(9669)),c=r.n(o);const l={data:function(){return{image_load:!1,favorite:!1,glutenFree:!1,vegetarian:!1,vegan:!1,watched:!1}},props:{recipe:{type:Object,required:!0}},mounted:function(){var e=this;return(0,s.Z)((0,i.Z)().mark((function t(){return(0,i.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Number.isInteger(Number(e.recipe.id))||"FAMILY"===e.recipe.id.substring(0,6)?e.favorite=e.recipe.favorite:e.favorite=e.recipe.isFavorite,t.next=3,e.loadRecipeImage();case 3:return t.next=5,e.loadDietaryInfo();case 5:return t.next=7,e.isRecipeWatched();case 7:case"end":return t.stop()}}),t)})))()},methods:{loadRecipeImage:function(){var e=this;return(0,s.Z)((0,i.Z)().mark((function t(){return(0,i.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,new Promise((function(t,r){var a=new Image;a.src=e.recipe.image,a.onload=function(){e.image_load=!0,t()},a.onerror=function(){e.image_load=!1,console.error("Image failed to load: "+e.recipe.image),r()}}));case 3:t.next=8;break;case 5:t.prev=5,t.t0=t["catch"](0),console.error("Error loading image:",t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})))()},isRecipeWatched:function(){var e=this;return(0,s.Z)((0,i.Z)().mark((function t(){return(0,i.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.watched=e.recipe.watched,console.log("Is recipe watched:",e.recipe.id,e.watched);case 2:case"end":return t.stop()}}),t)})))()},loadDietaryInfo:function(){var e=this;return(0,s.Z)((0,i.Z)().mark((function t(){return(0,i.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.glutenFree=e.recipe.glutenFree,e.vegetarian=e.recipe.vegetarian,e.vegan=e.recipe.vegan;case 3:case"end":return t.stop()}}),t)})))()},onImageLoad:function(){this.image_load=!0},onImageError:function(){console.error("Image failed to load: "+this.recipe.image),this.image_load=!1},toggleFavorite:function(){var e=this;return(0,s.Z)((0,i.Z)().mark((function t(){var r;return(0,i.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(c().defaults.withCredentials=!0,e.favorite=!e.favorite,r="".concat(e.$root.store.server_domain,"/users/favorites"),t.prev=3,!e.favorite){t.next=9;break}return t.next=7,c().post(r,{recipeId:e.recipe.id});case 7:t.next=11;break;case 9:return t.next=11,c()["delete"](r,{data:{recipeId:e.recipe.id}});case 11:t.next=17;break;case 13:t.prev=13,t.t0=t["catch"](3),e.favorite=!e.favorite,console.error("Error toggling favorite:",t.t0);case 17:return t.prev=17,c().defaults.withCredentials=!1,t.finish(17);case 20:case"end":return t.stop()}}),t,null,[[3,13,17,20]])})))()}}},u=l;var p=r(1001),d=(0,p.Z)(u,a,n,!1,null,"b5783cac",null);const m=d.exports},723:(e,t,r)=>{"use strict";r(6992),r(8674),r(9601),r(7727),r(9554),r(1539),r(4747);var a=r(144),n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"background",attrs:{id:"app"}},[t("b-navbar",{staticClass:"navbar-custom navbar-fixed-top",attrs:{toggleable:"lg",type:"dark"}},[t("b-navbar-brand",{attrs:{to:{name:"main"}}},[e._v("Vue Recipes")]),t("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),t("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[t("b-navbar-nav",[t("b-nav-item",{attrs:{to:{name:"about"},exact:""}},[e._v("About")]),t("b-nav-item",{attrs:{to:{name:"search"},exact:""}},[t("i",{staticClass:"fas fa-search mr-2"}),e._v(" Search ")]),e.$root.store.username?t("div",{staticClass:"separator"},[e._v("|")]):e._e(),e.$root.store.username?t("b-nav-item",{staticClass:"meal-plan-info",attrs:{to:{name:"meal-plan"}}},[e._v(" Recipes in Meal Plan"),t("i",{staticClass:"fas fa-utensils ml-2"}),e._v(" : "),t("b-badge",{class:e.badgeClass},[e._v(e._s(e.numOfRecipesInMeal))])],1):e._e()],1),t("b-navbar-nav",{staticClass:"ml-auto"},[e.$root.store.username?[t("div",{staticClass:"user-box d-flex align-items-center"},[t("span",{staticClass:"mr-2"},[e._v(" ðŸ‘‹ Hello: ")]),t("b-dropdown",{staticClass:"personal-dropdown",attrs:{id:"dropdown-1",right:""},scopedSlots:e._u([{key:"button-content",fn:function(){return[t("i",{staticClass:"fas fa-user mr-2"}),e._v(" "+e._s(e.$root.store.username)+" ")]},proxy:!0}])},[t("b-dropdown-item",{attrs:{to:{name:"favorites"}}},[e._v(" My Favorites "),t("i",{staticClass:"fas fa-heart ml-2"})]),t("b-dropdown-item",{attrs:{to:{name:"my-recipes"}}},[e._v(" My Recipes "),t("i",{staticClass:"fas fa-book ml-2"})]),t("b-dropdown-item",{attrs:{to:{name:"family-recipes"}}},[e._v(" My Family Recipes "),t("i",{staticClass:"fas fa-home ml-2"})]),t("b-dropdown-item",{attrs:{to:{name:"meal-plan"}}},[e._v(" My Meal Plan "),t("i",{staticClass:"fas fa-utensils ml-2"})]),t("b-dropdown-item",{on:{click:function(t){return e.$bvModal.show("create-recipe-modal")}}},[e._v(" Create New Recipe "),t("i",{staticClass:"fas fa-plus-circle ml-2"})]),t("b-dropdown-divider"),t("b-dropdown-item",{staticClass:"logout-item",on:{click:e.logout}},[t("span",{staticClass:"logout-text"},[e._v("Logout")]),t("i",{staticClass:"fas fa-sign-out-alt logout-icon"})])],1)],1)]:[t("div",{staticClass:"user-box-before d-flex align-items-center"},[t("span",{staticClass:"d-flex align-items-center"},[t("span",{staticClass:"mr-2 text-light"},[e._v(" ðŸ‘‹ Hello guest: ")]),t("b-button",{staticClass:"mr-2 btn-register",attrs:{variant:"outline-light",to:{name:"register"}}},[e._v("Register")]),t("b-button",{staticClass:"btn-login",attrs:{variant:"outline-light",to:{name:"login"}}},[t("i",{staticClass:"fas fa-sign-in-alt mr-2"}),e._v(" Login ")])],1)])]],2)],1)],1),t("router-view"),t("CreateRecipeModal")],1)},i=[],s=r(124),o=r(8534),c=(r(7658),r(9753),r(2222),r(7042),r(8309),r(2526),r(1817),r(6699),r(2023),function(){var e=this,t=e._self._c;return t("b-modal",{staticClass:"wide-modal",attrs:{id:"create-recipe-modal","title-class":"modal-title-custom",title:"Create a New Recipe","hide-footer":"",size:"lg"}},[t("div",{staticClass:"add-recipe"},[t("form",{on:{submit:function(t){return t.preventDefault(),t.stopPropagation(),e.submitRecipe.apply(null,arguments)}}},[1===e.currentScreen?t("div",[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"title"}},[e._v("Recipe Title")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.recipe.title,expression:"recipe.title"}],attrs:{type:"text",id:"title",required:""},domProps:{value:e.recipe.title},on:{input:function(t){t.target.composing||e.$set(e.recipe,"title",t.target.value)}}})]),t("div",{staticClass:"form-group"},[t("label",[e._v("Recipe Image")]),t("div",{staticClass:"image-input"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.recipe.image,expression:"recipe.image"}],attrs:{type:"url",placeholder:"Image URL",required:"",maxlength:"300"},domProps:{value:e.recipe.image},on:{input:function(t){t.target.composing||e.$set(e.recipe,"image",t.target.value)}}})])]),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"readyInMinutes"}},[e._v("Ready Time In Minutes")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.recipe.readyInMinutes,expression:"recipe.readyInMinutes"}],attrs:{type:"number",id:"readyInMinutes",required:""},domProps:{value:e.recipe.readyInMinutes},on:{input:function(t){t.target.composing||e.$set(e.recipe,"readyInMinutes",t.target.value)}}})]),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"servings"}},[e._v("Servings")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.recipe.servings,expression:"recipe.servings"}],attrs:{type:"number",id:"servings",required:""},domProps:{value:e.recipe.servings},on:{input:function(t){t.target.composing||e.$set(e.recipe,"servings",t.target.value)}}})]),t("div",{staticClass:"form-group"},[t("label",[e._v("Dietary Options")]),t("div",{staticClass:"checkbox-group"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.recipe.vegetarian,expression:"recipe.vegetarian"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.recipe.vegetarian)?e._i(e.recipe.vegetarian,null)>-1:e.recipe.vegetarian},on:{change:function(t){var r=e.recipe.vegetarian,a=t.target,n=!!a.checked;if(Array.isArray(r)){var i=null,s=e._i(r,i);a.checked?s<0&&e.$set(e.recipe,"vegetarian",r.concat([i])):s>-1&&e.$set(e.recipe,"vegetarian",r.slice(0,s).concat(r.slice(s+1)))}else e.$set(e.recipe,"vegetarian",n)}}}),e._v(" Vegetarian")]),t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.recipe.vegan,expression:"recipe.vegan"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.recipe.vegan)?e._i(e.recipe.vegan,null)>-1:e.recipe.vegan},on:{change:function(t){var r=e.recipe.vegan,a=t.target,n=!!a.checked;if(Array.isArray(r)){var i=null,s=e._i(r,i);a.checked?s<0&&e.$set(e.recipe,"vegan",r.concat([i])):s>-1&&e.$set(e.recipe,"vegan",r.slice(0,s).concat(r.slice(s+1)))}else e.$set(e.recipe,"vegan",n)}}}),e._v(" Vegan")]),t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.recipe.glutenFree,expression:"recipe.glutenFree"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.recipe.glutenFree)?e._i(e.recipe.glutenFree,null)>-1:e.recipe.glutenFree},on:{change:function(t){var r=e.recipe.glutenFree,a=t.target,n=!!a.checked;if(Array.isArray(r)){var i=null,s=e._i(r,i);a.checked?s<0&&e.$set(e.recipe,"glutenFree",r.concat([i])):s>-1&&e.$set(e.recipe,"glutenFree",r.slice(0,s).concat(r.slice(s+1)))}else e.$set(e.recipe,"glutenFree",n)}}}),e._v(" Gluten Free")])])]),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"ingredients"}},[e._v("Ingredients")]),e._l(e.recipe.extendedIngredients,(function(r,a){return t("div",{key:a,staticClass:"ingredient framed"},[t("div",{staticClass:"ingredient-details"},[t("input",{directives:[{name:"model",rawName:"v-model",value:r.name,expression:"ingredient.name"}],attrs:{type:"text",placeholder:"Ingredient Name",required:""},domProps:{value:r.name},on:{input:function(t){t.target.composing||e.$set(r,"name",t.target.value)}}}),t("input",{directives:[{name:"model",rawName:"v-model",value:r.amount,expression:"ingredient.amount"}],attrs:{type:"number",placeholder:"Amount",required:""},domProps:{value:r.amount},on:{input:function(t){t.target.composing||e.$set(r,"amount",t.target.value)}}}),t("input",{directives:[{name:"model",rawName:"v-model",value:r.unit,expression:"ingredient.unit"}],attrs:{type:"text",placeholder:"Unit",required:""},domProps:{value:r.unit},on:{input:function(t){t.target.composing||e.$set(r,"unit",t.target.value)}}}),t("button",{staticClass:"remove-btn",attrs:{type:"button"},on:{click:function(t){return e.removeIngredient(a)}}},[e._v("X")])]),t("div",{staticClass:"form-group"},[t("label",[e._v("Ingredient Image")]),t("div",{staticClass:"toggle-switch"},[t("input",{directives:[{name:"model",rawName:"v-model",value:r.imageOption,expression:"ingredient.imageOption"}],staticClass:"toggle-input",attrs:{type:"radio",id:"url-"+a,value:"url"},domProps:{checked:e._q(r.imageOption,"url")},on:{change:function(t){return e.$set(r,"imageOption","url")}}}),t("label",{staticClass:"toggle-label url",attrs:{for:"url-"+a}},[e._v("URL")]),t("input",{directives:[{name:"model",rawName:"v-model",value:r.imageOption,expression:"ingredient.imageOption"}],staticClass:"toggle-input",attrs:{type:"radio",id:"none-"+a,value:"none"},domProps:{checked:e._q(r.imageOption,"none")},on:{change:function(t){return e.$set(r,"imageOption","none")}}}),t("label",{staticClass:"toggle-label none",attrs:{for:"none-"+a}},[e._v("None")]),t("span",{staticClass:"toggle-slider",class:{"toggle-slider-none":"none"===r.imageOption}})]),"url"===r.imageOption?t("div",{staticClass:"image-input"},[t("input",{directives:[{name:"model",rawName:"v-model",value:r.image,expression:"ingredient.image"}],attrs:{type:"url",placeholder:"Image URL",maxlength:"300"},domProps:{value:r.image},on:{input:function(t){t.target.composing||e.$set(r,"image",t.target.value)}}})]):e._e()])])})),t("button",{staticClass:"add-btn",attrs:{type:"button"},on:{click:e.addIngredient}},[e._v("Add Ingredient")])],2),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"equipment"}},[e._v("Equipment")]),e._l(e.recipe.equipment,(function(r,a){return t("div",{key:a,staticClass:"equipment framed"},[t("div",{staticClass:"equipment-details"},[t("input",{directives:[{name:"model",rawName:"v-model",value:r.name,expression:"equip.name"}],attrs:{type:"text",placeholder:"Equipment Name",required:""},domProps:{value:r.name},on:{input:function(t){t.target.composing||e.$set(r,"name",t.target.value)}}}),t("button",{staticClass:"remove-btn",attrs:{type:"button"},on:{click:function(t){return e.removeEquipment(a)}}},[e._v("X")])]),t("div",{staticClass:"form-group"},[t("label",[e._v("Equipment Image")]),t("div",{staticClass:"toggle-switch"},[t("input",{directives:[{name:"model",rawName:"v-model",value:r.imageOption,expression:"equip.imageOption"}],staticClass:"toggle-input",attrs:{type:"radio",id:"equip-url-"+a,value:"url"},domProps:{checked:e._q(r.imageOption,"url")},on:{change:function(t){return e.$set(r,"imageOption","url")}}}),t("label",{staticClass:"toggle-label url",attrs:{for:"equip-url-"+a}},[e._v("URL")]),t("input",{directives:[{name:"model",rawName:"v-model",value:r.imageOption,expression:"equip.imageOption"}],staticClass:"toggle-input",attrs:{type:"radio",id:"equip-none-"+a,value:"none"},domProps:{checked:e._q(r.imageOption,"none")},on:{change:function(t){return e.$set(r,"imageOption","none")}}}),t("label",{staticClass:"toggle-label none",attrs:{for:"equip-none-"+a}},[e._v("None")]),t("span",{staticClass:"toggle-slider",class:{"toggle-slider-none":"none"===r.imageOption}})]),"url"===r.imageOption?t("div",{staticClass:"image-input"},[t("input",{directives:[{name:"model",rawName:"v-model",value:r.image,expression:"equip.image"}],attrs:{type:"url",placeholder:"Image URL",maxlength:"300"},domProps:{value:r.image},on:{input:function(t){t.target.composing||e.$set(r,"image",t.target.value)}}})]):e._e()])])})),t("button",{staticClass:"add-btn",attrs:{type:"button"},on:{click:e.addEquipment}},[e._v("Add Equipment")])],2),t("div",{staticClass:"form-actions"},[t("button",{staticClass:"next-btn",attrs:{type:"button"},on:{click:e.nextScreen}},[e._v("Next")])])]):e._e(),2===e.currentScreen?t("div",[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"steps"}},[e._v("Steps")]),e._l(e.recipe.steps,(function(r,a){return t("div",{key:a,staticClass:"step"},[t("div",{staticClass:"step-number"},[e._v("Step "+e._s(a+1)+":")]),t("textarea",{directives:[{name:"model",rawName:"v-model",value:r.description,expression:"step.description"}],attrs:{placeholder:"Step Description",required:""},domProps:{value:r.description},on:{input:function(t){t.target.composing||e.$set(r,"description",t.target.value)}}}),t("div",{staticClass:"form-group"},[t("label",[e._v("Ingredients")]),t("div",{staticClass:"selection-container"},[t("div",{staticClass:"selection-group"},e._l(e.recipe.extendedIngredients,(function(a){return t("div",{key:a.name,staticClass:"selection-item",class:{selected:r.ingredients.includes(a.name)},on:{click:function(t){return e.toggleSelection(r.ingredients,a.name)}}},[e._v(" "+e._s(a.name)+" ")])})),0)])]),t("div",{staticClass:"form-group"},[t("label",[e._v("Equipment")]),t("div",{staticClass:"selection-container"},[t("div",{staticClass:"selection-group"},e._l(e.recipe.equipment,(function(a){return t("div",{key:a.name,staticClass:"selection-item",class:{selected:r.equipment.includes(a.name)},on:{click:function(t){return e.toggleSelection(r.equipment,a.name)}}},[e._v(" "+e._s(a.name)+" ")])})),0)])]),t("button",{staticClass:"remove-btn",attrs:{type:"button"},on:{click:function(t){return e.removeStep(a)}}},[e._v("X")])])})),t("button",{staticClass:"add-btn",attrs:{type:"button"},on:{click:e.addStep}},[e._v("Add Step")])],2),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"summary"}},[e._v("Summary")]),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.recipe.summary,expression:"recipe.summary"}],attrs:{id:"summary",required:""},domProps:{value:e.recipe.summary},on:{input:function(t){t.target.composing||e.$set(e.recipe,"summary",t.target.value)}}})]),t("div",{staticClass:"form-actions"},[t("button",{staticClass:"prev-btn",attrs:{type:"button"},on:{click:e.prevScreen}},[e._v("Previous")]),t("button",{staticClass:"submit-btn",attrs:{type:"submit"}},[e._v("Create Recipe")])])]):e._e()])])])}),l=[],u=(r(561),r(2772),r(1249),r(9826),r(1220)),p=r(3099),d=r(9669),m=r.n(d);const v={name:"CreateRecipeModal",components:{BModal:u.N},data:function(){return{recipe:this.getInitialRecipe(),imageOption:"url",submitted:!1,currentScreen:1}},methods:{getInitialRecipe:function(){return{id:null,image:"",title:"",readyInMinutes:0,aggregateLikes:0,servings:0,vegetarian:!1,vegan:!1,glutenFree:!1,extendedIngredients:[{name:"",amount:0,unit:"",image:"",imageOption:"none"}],steps:[{description:"",ingredients:[],equipment:[]}],summary:"",equipment:[{name:"",image:"",imageOption:"none"}]}},addIngredient:function(){this.recipe.extendedIngredients.push({name:"",amount:0,unit:"",image:"",imageOption:"none"})},removeIngredient:function(e){this.recipe.extendedIngredients.splice(e,1)},addStep:function(){this.recipe.steps.push({description:"",ingredients:[],equipment:[]})},removeStep:function(e){this.recipe.steps.splice(e,1)},addEquipment:function(){this.recipe.equipment.push({name:"",image:"",imageOption:"none"})},removeEquipment:function(e){this.recipe.equipment.splice(e,1)},toggleSelection:function(e,t){var r=e.indexOf(t);r>-1?e.splice(r,1):e.push(t)},getRandomId:function(){var e;e=Math.floor(1e4+9e4*Math.random());while((0,p.mockCheckIfIdNumberExist)(e))e=Math.floor(1e4+9e4*Math.random);this.recipe.id=e},submitRecipe:function(){var e=this;return(0,o.Z)((0,s.Z)().mark((function t(){var r,a,n,i,o;return(0,s.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,m().defaults.withCredentials=!0,r=e.recipe.extendedIngredients.map((function(e){return{name:e.name,amount:e.amount,unit:e.unit}})),a=e.recipe.steps.map((function(t,r){return{number:r+1,step:t.description,ingredients:t.ingredients.map((function(t){var r=e.recipe.extendedIngredients.find((function(e){return e.name===t}));return r?{id:r.id||Math.floor(1e4+9e4*Math.random()),name:r.name,localizedName:r.name,image:r.image||""}:{}})),equipment:t.equipment.map((function(t){var r=e.recipe.equipment.find((function(e){return e.name===t}));return r?{id:r.id||Math.floor(1e4+9e4*Math.random()),name:r.name,localizedName:r.name,image:r.image||""}:{}}))}})),n=e.recipe.extendedIngredients.map((function(e){return{id:e.id||Math.floor(1e4+9e4*Math.random()),name:e.name}})),i=e.recipe.equipment.map((function(e){return{id:e.id||Math.floor(1e4+9e4*Math.random()),name:e.name}})),t.next=8,m().post(e.$root.store.server_domain+"/users/my_recipes",{user_id:e.recipe.id,title:e.recipe.title,readyInMinutes:e.recipe.readyInMinutes,image:e.recipe.image,popularity:e.recipe.aggregateLikes,vegan:e.recipe.vegan,vegetarian:e.recipe.vegetarian,glutenFree:e.recipe.glutenFree,servings:e.recipe.servings,ingredients:r,instructions:[{name:"",steps:a}],parsedInstructions:[{name:"",steps:a}],topIngredients:n,topEquipment:i,summary:e.recipe.summary});case 8:o=t.sent,201===o.status&&(e.resetForm(),e.$bvToast.toast("Your recipe has been created successfully!",{title:"Success",variant:"success",solid:!0,autoHideDelay:5e3,toaster:"b-toaster-top-center"}),e.$bvModal.hide("create-recipe-modal")),m().defaults.withCredentials=!1,t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](0),console.error("Error creating recipe:",t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})))()},getDiets:function(){var e=[];return this.recipe.vegetarian&&e.push("vegetarian"),this.recipe.vegan&&e.push("vegan"),this.recipe.glutenFree&&e.push("gluten free"),e},resetForm:function(){this.recipe=this.getInitialRecipe(),this.imageOption="url",this.submitted=!1,this.currentScreen=1},nextScreen:function(){this.currentScreen<2&&this.currentScreen++},prevScreen:function(){this.currentScreen>1&&this.currentScreen--}}},g=v;var f=r(1001),h=(0,f.Z)(g,c,l,!1,null,"3c731eb2",null);const b=h.exports,C={name:"App",components:{CreateRecipeModal:b},data:function(){return{numOfRecipesInMeal:0}},computed:{badgeClass:function(){return this.numOfRecipesInMeal>0?"badge-red":"badge-light"}},methods:{logout:function(){var e=this;return(0,o.Z)((0,s.Z)().mark((function t(){return(0,s.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.axios["delete"]("".concat(e.$root.store.server_domain,"/users/deleteWatchedRecipes"));case 3:return t.next=5,e.axios.post("".concat(e.$root.store.server_domain,"/users/resetAllMealPlan"));case 5:e.$root.$emit("clear-last-watched-recipes"),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.error("Error during the first logout step:",t.t0);case 11:return t.prev=11,t.prev=12,t.next=15,e.axios.post("".concat(e.$root.store.server_domain,"/Logout"));case 15:t.next=20;break;case 17:t.prev=17,t.t1=t["catch"](12),console.error("Error during the second logout step:",t.t1);case 20:return e.numOfRecipesInMeal=0,e.$root.store.logout(),e.$root.toast("Logout","User logged out successfully","success"),e.$router.push("/")["catch"]((function(){e.$forceUpdate()})),t.finish(11);case 25:case"end":return t.stop()}}),t,null,[[0,8,11,25],[12,17]])})))()},updateMealCount:function(){var e=this;return(0,o.Z)((0,s.Z)().mark((function t(){var r;return(0,s.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.axios.get("".concat(e.$root.store.server_domain,"/users/meal_plan/count"),{headers:{"Cache-Control":"no-cache"}});case 3:r=t.sent,e.numOfRecipesInMeal=r.data.mealPlanCount,t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.error("Error fetching meal plan count:",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()}},created:function(){this.updateMealCount(),this.$root.$on("update-meal-count",this.updateMealCount),this.$root.$on("user-logged-in",this.updateMealCount)},beforeDestroy:function(){this.$root.$off("update-meal-count",this.updateMealCount)}},_=C;var w=(0,f.Z)(_,n,i,!1,null,null,null);const y=w.exports;var x=r(1939),k=r.n(x),$=(r(8783),r(3948),function(){var e=this,t=e._self._c;return t("div",{staticClass:"main-container"},[e._m(0),t("div",{staticClass:"recipes-section"},[t("RecipePreviewList",{staticClass:"recipe-card",attrs:{title:"Explore these Recipes",source:"explore"}}),t("div",{staticClass:"blur-container"},[t("RecipePreviewList",{class:{"recipe-card":!0,blur:!e.isAuthenticated},attrs:{title:"Last watched recipes",refreshButton:!1,source:"watched"}}),e.isAuthenticated?e._e():t("div",{staticClass:"auth-form"},[t("b-card",{staticClass:"login-card shadow-sm p-4"},[t("h1",{staticClass:"login-prompt text-center mb-4"},[e._v("You need to Login to view this:")]),t("b-form",{on:{submit:function(t){return t.preventDefault(),e.onLogin.apply(null,arguments)}}},[t("b-form-group",{attrs:{label:"Username:","label-for":"Username","label-cols-sm":"3"}},[t("b-form-input",{staticClass:"rounded-pill",attrs:{id:"Username",type:"text",state:e.validateState("username"),placeholder:"Enter your username",required:""},model:{value:e.$v.form.username.$model,callback:function(t){e.$set(e.$v.form.username,"$model",t)},expression:"$v.form.username.$model"}}),e.$v.form.username.required?e._e():t("b-form-invalid-feedback",[e._v(" Username is required ")])],1),t("b-form-group",{attrs:{label:"Password:","label-for":"Password","label-cols-sm":"3"}},[t("b-form-input",{staticClass:"rounded-pill",attrs:{id:"Password",type:"password",state:e.validateState("password"),placeholder:"Enter your password",required:""},model:{value:e.$v.form.password.$model,callback:function(t){e.$set(e.$v.form.password,"$model",t)},expression:"$v.form.password.$model"}}),e.$v.form.password.required?e._e():t("b-form-invalid-feedback",[e._v(" Password is required ")])],1),t("div",{staticClass:"d-flex justify-content-center"},[t("b-button",{staticClass:"rounded-pill px-4",attrs:{type:"submit",variant:"primary"}},[e._v("Login")])],1),t("div",{staticClass:"text-center mt-3"},[e._v(" Don't have an account yet? "),t("router-link",{staticClass:"text-primary font-weight-bold",attrs:{to:"/register"}},[e._v("Register here")])],1)],1)],1),e.form.submitError?t("b-alert",{staticClass:"mt-3",attrs:{variant:"danger",dismissible:""}},[e._v(" Login failed: "+e._s(e.form.submitError)+" ")]):e._e()],1)],1)],1)])}),I=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"wrapper"},[t("h1",[e._v("Main Page")])])}],q=function(){var e=this,t=e._self._c;return t("b-container",[t("div",{staticClass:"header"},[t("h3",[e._v(" "+e._s(e.title)+": "),e._t("default")],2),e.refreshButton?t("button",{staticClass:"refresh-button",on:{click:e.updateRecipes}},[t("i",{staticClass:"fas fa-sync-alt"})]):e._e()]),t("b-row",e._l(e.recipes,(function(e){return t("b-col",{key:e.id,attrs:{cols:"12",md:"6",lg:"4"}},[t("RecipePreview",{staticClass:"recipePreview",attrs:{recipe:e}})],1)})),1)],1)},R=[],P=r(5124);const M={name:"RecipePreviewList",components:{RecipePreview:P.Z},props:{title:{type:String,required:!0},refreshButton:{type:Boolean,default:!0},source:{type:String,required:!0}},data:function(){return{recipes:[]}},mounted:function(){this.updateRecipes(),p.eventBus.$on("recipe-watched",this.updateRecipes),p.eventBus.$on("watched-recipes-cleared",this.updateRecipes),"watched"===this.source&&this.$root.$on("clear-last-watched-recipes",this.clearRecipes)},beforeDestroy:function(){p.eventBus.$off("recipe-watched",this.updateRecipes),p.eventBus.$off("watched-recipes-cleared",this.updateRecipes),"watched"===this.source&&this.$root.$off("clear-last-watched-recipes",this.clearRecipes)},methods:{updateRecipes:function(){var e=this;return(0,o.Z)((0,s.Z)().mark((function t(){var r,a,n;return(0,s.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,"watched"!==e.source){t.next=11;break}return t.next=4,fetch(e.$root.store.server_domain+"/users/lastWatchedRecipes");case 4:return r=t.sent,t.next=7,r.json();case 7:a=t.sent,e.recipes=a,t.next=18;break;case 11:return t.next=13,fetch(e.$root.store.server_domain+"/recipes/random");case 13:return r=t.sent,t.next=16,r.json();case 16:n=t.sent,e.recipes=n;case 18:t.next=23;break;case 20:t.prev=20,t.t0=t["catch"](0),console.log(t.t0);case 23:case"end":return t.stop()}}),t,null,[[0,20]])})))()},clearRecipes:function(){this.recipes=[]}}},O=M;var S=(0,f.Z)(O,q,R,!1,null,"20430158",null);const N=S.exports;var E=r(379);const Z={components:{RecipePreviewList:N},data:function(){return{form:{username:"",password:"",submitError:void 0}}},validations:{form:{username:{required:E.C1},password:{required:E.C1}}},computed:{isAuthenticated:function(){return!!this.$root.store.username}},methods:{validateState:function(e){var t=this.$v.form[e],r=t.$dirty,a=t.$error;return r?!a:null},Login:function(){var e=this;return(0,o.Z)((0,s.Z)().mark((function t(){return(0,s.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.axios.post("".concat(e.$root.store.server_domain,"/Login"),{username:e.form.username,password:e.form.password},{withCredentials:!0});case 3:t.sent,e.$root.store.login(e.form.username),e.$root.$emit("user-logged-in"),e.$root.$emit("update-meal-count"),e.$router.push("/"),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),e.form.submitError=t.t0.response?t.t0.response.data.message:"Unknown error";case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()},onLogin:function(){this.form.submitError=void 0,this.$v.form.$touch(),this.$v.form.$anyError||this.Login()}}},F=Z;var A=(0,f.Z)(F,$,I,!1,null,"998f5654",null);const L=A.exports;var j=function(){var e=this,t=e._self._c;return t("div",{staticClass:"not-found-container"},[t("div",{staticClass:"error-content"},[t("h1",{staticClass:"error-title"},[e._v("404")]),t("p",{staticClass:"error-message"},[e._v("Oops! The page you're looking for doesn't exist.")]),t("router-link",{staticClass:"home-link",attrs:{to:"/"}},[e._v("Take Me Home")])],1)])},T=[];const D={name:"NotFoundPage"},U=D;var B=(0,f.Z)(U,j,T,!1,null,"0bebaa7c",null);const H=B.exports;var W=[{path:"/",name:"main",component:L},{path:"/register",name:"register",component:function(){return r.e(865).then(r.bind(r,5865))}},{path:"/login",name:"login",component:function(){return r.e(446).then(r.bind(r,7446))}},{path:"/search",name:"search",component:function(){return r.e(806).then(r.bind(r,8806))}},{path:"/recipe/:id",name:"recipe",component:function(){return r.e(730).then(r.bind(r,7730))}},{path:"*",name:"notFound",component:H},{path:"/about",name:"about",component:function(){return r.e(836).then(r.bind(r,2836))}},{path:"/favorites",name:"favorites",component:function(){return r.e(404).then(r.bind(r,4404))}},{path:"/my-recipes",name:"my-recipes",component:function(){return r.e(21).then(r.bind(r,8021))}},{path:"/family-recipes",name:"family-recipes",component:function(){return r.e(931).then(r.bind(r,3931))}},{path:"/preparation/:recipeId",name:"RecipePreparation",component:function(){return r.e(609).then(r.bind(r,5609))}},{path:"/meal-plan",name:"meal-plan",component:function(){return r.e(706).then(r.bind(r,8706))}}];const V=W;var X=r(8345),Y=(r(6123),r(8620)),z=(r(7024),r(8571)),G=r(3017),J=r(508),K=r(7563),Q=r(7419),ee=r(1869),te=r(295),re=r(3090),ae=r(794),ne=r(4063),ie=r(8793),se=r(7772);a["default"].use(X.ZP);var oe=new X.ZP({routes:V});a["default"].use(z.XG7),a["default"].use(G.A7),[J.E,K.w6,Q.g,ee.SY,te.xL,re.u3,ae.v5,ne.F,ie.m$,se.A6].forEach((function(e){return a["default"].use(e)})),a["default"].use(Y.ZP),m().interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),m().interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e)})),a["default"].use(k(),m()),a["default"].config.productionTip=!1;var ce={server_domain:"https://amit-barak-oded.cs.bgu.ac.il",username:localStorage.username,favorites:JSON.parse(localStorage.getItem("favorites"))||[],login:function(e){localStorage.setItem("username",e),this.username=e,console.log("login",this.username)},logout:function(){console.log("logout"),localStorage.removeItem("username"),this.username=void 0}};console.log(ce),new a["default"]({router:oe,data:function(){return{store:ce}},methods:{toast:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.$bvToast.toast("".concat(t),{title:"".concat(e),toaster:"b-toaster-top-center",variant:r,solid:!0,appendToast:a,autoHideDelay:3e3})}},render:function(e){return e(y)}}).$mount("#app")},3099:()=>{}},t={};function r(a){var n=t[a];if(void 0!==n)return n.exports;var i=t[a]={exports:{}};return e[a](i,i.exports,r),i.exports}r.m=e,(()=>{var e=[];r.O=(t,a,n,i)=>{if(!a){var s=1/0;for(u=0;u<e.length;u++){for(var[a,n,i]=e[u],o=!0,c=0;c<a.length;c++)(!1&i||s>=i)&&Object.keys(r.O).every((e=>r.O[e](a[c])))?a.splice(c--,1):(o=!1,i<s&&(s=i));if(o){e.splice(u--,1);var l=n();void 0!==l&&(t=l)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[a,n,i]}})(),(()=>{r.n=e=>{var t=e&&e.__esModule?()=>e["default"]:()=>e;return r.d(t,{a:t}),t}})(),(()=>{r.d=(e,t)=>{for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}})(),(()=>{r.f={},r.e=e=>Promise.all(Object.keys(r.f).reduce(((t,a)=>(r.f[a](e,t),t)),[]))})(),(()=>{r.u=e=>"js/"+e+"."+{21:"c143f830",404:"8dc68d88",446:"f5e461a1",609:"e18f58af",706:"ad204a2a",730:"58853db6",806:"db71f4c5",836:"c6c3112e",865:"c2cf866c",931:"1b85efc2"}[e]+".js"})(),(()=>{r.miniCssF=e=>"css/"+e+"."+{21:"14673231",404:"7201d316",446:"c509fc6b",609:"dfb80e7a",706:"d17d8a49",730:"77c4c5ac",806:"cec9380c",836:"7c98ad9f",931:"cf500f2f"}[e]+".css"})(),(()=>{r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{var e={},t="assignment-2-1:";r.l=(a,n,i,s)=>{if(e[a])e[a].push(n);else{var o,c;if(void 0!==i)for(var l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var p=l[u];if(p.getAttribute("src")==a||p.getAttribute("data-webpack")==t+i){o=p;break}}o||(c=!0,o=document.createElement("script"),o.charset="utf-8",o.timeout=120,r.nc&&o.setAttribute("nonce",r.nc),o.setAttribute("data-webpack",t+i),o.src=a),e[a]=[n];var d=(t,r)=>{o.onerror=o.onload=null,clearTimeout(m);var n=e[a];if(delete e[a],o.parentNode&&o.parentNode.removeChild(o),n&&n.forEach((e=>e(r))),t)return t(r)},m=setTimeout(d.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=d.bind(null,o.onerror),o.onload=d.bind(null,o.onload),c&&document.head.appendChild(o)}}})(),(()=>{r.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})(),(()=>{r.p="/"})(),(()=>{if("undefined"!==typeof document){var e=(e,t,r,a,n)=>{var i=document.createElement("link");i.rel="stylesheet",i.type="text/css";var s=r=>{if(i.onerror=i.onload=null,"load"===r.type)a();else{var s=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.href||t,c=new Error("Loading CSS chunk "+e+" failed.\n("+o+")");c.code="CSS_CHUNK_LOAD_FAILED",c.type=s,c.request=o,i.parentNode&&i.parentNode.removeChild(i),n(c)}};return i.onerror=i.onload=s,i.href=t,r?r.parentNode.insertBefore(i,r.nextSibling):document.head.appendChild(i),i},t=(e,t)=>{for(var r=document.getElementsByTagName("link"),a=0;a<r.length;a++){var n=r[a],i=n.getAttribute("data-href")||n.getAttribute("href");if("stylesheet"===n.rel&&(i===e||i===t))return n}var s=document.getElementsByTagName("style");for(a=0;a<s.length;a++){n=s[a],i=n.getAttribute("data-href");if(i===e||i===t)return n}},a=a=>new Promise(((n,i)=>{var s=r.miniCssF(a),o=r.p+s;if(t(s,o))return n();e(a,o,null,n,i)})),n={143:0};r.f.miniCss=(e,t)=>{var r={21:1,404:1,446:1,609:1,706:1,730:1,806:1,836:1,931:1};n[e]?t.push(n[e]):0!==n[e]&&r[e]&&t.push(n[e]=a(e).then((()=>{n[e]=0}),(t=>{throw delete n[e],t})))}}})(),(()=>{var e={143:0};r.f.j=(t,a)=>{var n=r.o(e,t)?e[t]:void 0;if(0!==n)if(n)a.push(n[2]);else{var i=new Promise(((r,a)=>n=e[t]=[r,a]));a.push(n[2]=i);var s=r.p+r.u(t),o=new Error,c=a=>{if(r.o(e,t)&&(n=e[t],0!==n&&(e[t]=void 0),n)){var i=a&&("load"===a.type?"missing":a.type),s=a&&a.target&&a.target.src;o.message="Loading chunk "+t+" failed.\n("+i+": "+s+")",o.name="ChunkLoadError",o.type=i,o.request=s,n[1](o)}};r.l(s,c,"chunk-"+t,t)}},r.O.j=t=>0===e[t];var t=(t,a)=>{var n,i,[s,o,c]=a,l=0;if(s.some((t=>0!==e[t]))){for(n in o)r.o(o,n)&&(r.m[n]=o[n]);if(c)var u=c(r)}for(t&&t(a);l<s.length;l++)i=s[l],r.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return r.O(u)},a=self["webpackChunkassignment_2_1"]=self["webpackChunkassignment_2_1"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var a=r.O(void 0,[998],(()=>r(723)));a=r.O(a)})();
//# sourceMappingURL=app.d529ddbe.js.map