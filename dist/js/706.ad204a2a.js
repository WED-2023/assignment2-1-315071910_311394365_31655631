(self["webpackChunkassignment_2_1"]=self["webpackChunkassignment_2_1"]||[]).push([[706],{8706:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>C});var a=function(){var e=this,r=e._self._c;return r("div",[r("br"),r("h1",{staticClass:"title"},[e._v("Meal Planning")]),r("div",{staticClass:"meal-planning-container"},[e.isLoading?r("div",{staticClass:"loading-container"},[r("div",{staticClass:"loading-spinner"}),r("div",{staticClass:"loading-text"},[e._v("Loading...")])]):r("div",[e.mealRecipes.length?r("div",{staticClass:"meal-recipes"},[e._l(e.mealRecipes,(function(t,a){return r("div",{key:t.id,staticClass:"meal-recipe",class:{dragging:e.draggingIndex===a},attrs:{draggable:"true"},on:{dragstart:function(r){return e.onDragStart(a,r)},dragover:function(r){return e.onDragOver(r)},drop:function(r){return e.onDrop(a)},dragend:e.onDragEnd}},[r("div",{staticClass:"meal-recipe-content"},[r("div",{staticClass:"meal-recipe-image-container"},[r("img",{staticClass:"meal-recipe-photo",attrs:{src:t.image,alt:"Recipe Photo"}})]),r("div",{staticClass:"meal-recipe-details"},[r("div",{staticClass:"meal-recipe-header"},[r("span",{staticClass:"meal-recipe-number"},[e._v(e._s(a+1)+". "+e._s(t.title))]),r("button",{staticClass:"remove-btn",on:{click:function(r){return e.removeRecipeFromMeal(t.id)}}},[e._v("Ã—")])]),r("span",{staticClass:"meal-recipe-time"},[r("i",{staticClass:"fas fa-clock"}),e._v(" "+e._s(t.readyInMinutes)+" Minutes")]),r("div",{staticClass:"meal-recipe-status",class:e.getStatusClass(t.progress)},[r("span",[e._v(e._s(e.getRecipeStatusText(t.progress)))]),r("i",{class:e.getStatusIcon(t.progress)})]),r("div",{staticClass:"progress-bar-container"},[r("progress-bar",{attrs:{progress:Math.floor(100*t.progress)}})],1),t.progress<1?r("div",[r("router-link",{staticClass:"start-preparation",attrs:{to:{name:"RecipePreparation",params:{recipeId:t.id}}}},[r("i",{staticClass:"fas fa-play-circle"}),e._v(" "+e._s(0===t.progress?"Start Preparation":"Continue Preparation")+" ")])],1):r("br")])])])})),r("button",{staticClass:"clear-meal-btn",on:{click:e.showClearMealModal}},[e._v("Clear All Recipes From Meal Plan")])],2):r("div",{staticClass:"no-recipes"},[e._v("No recipes added to the meal plan yet.")])])]),r("b-modal",{attrs:{id:"clear-meal-modal"},on:{ok:e.clearMeal},scopedSlots:e._u([{key:"modal-title",fn:function(){return[e._v("Clear Meal Plan")]},proxy:!0}])},[e._v(" Are you sure you want to clear all recipes from the meal plan? ")])],1)},n=[],s=t(3144),i=t(124),o=t(8534),c=(t(1249),t(2707),t(2772),t(7327),t(1539),t(8862),t(561),t(9669)),l=t.n(c),u=function(){var e=this,r=e._self._c;return r("div",{staticClass:"progress-bar"},[r("div",{class:["progress-bar-fill",e.progressColor],style:{width:e.progress+"%"}}),r("span",{staticClass:"progress-bar-text"},[e._v(e._s(e.progress)+"%")])])},p=[];t(9653);const d={props:{progress:{type:Number,required:!0}},computed:{progressColor:function(){return this.progress>=75?"progress-bar-high":this.progress>=50?"progress-bar-medium":"progress-bar-low"}}},f=d;var g=t(1001),v=(0,g.Z)(f,u,p,!1,null,"3c009240",null);const m=v.exports,h={name:"MealPlanning",components:{ProgressBar:m},data:function(){return{mealRecipes:[],draggingIndex:null,isLoading:!0}},mounted:function(){var e=this;return(0,o.Z)((0,i.Z)().mark((function r(){return(0,i.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.getRecipes();case 2:case"end":return r.stop()}}),r)})))()},methods:{getRecipes:function(){var e=this;return(0,o.Z)((0,i.Z)().mark((function r(){var t,a;return(0,i.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,l().get("".concat(e.$root.store.server_domain,"/users/meal_plan"),{withCredentials:!0,headers:{"Cache-Control":"no-cache",Pragma:"no-cache",Expires:"0"}});case 3:t=r.sent,e.mealRecipes=t.data.map((function(e){return(0,s.Z)((0,s.Z)({},e),{},{progress:e.progress||0})})),a=JSON.parse(localStorage.getItem("mealRecipesOrder")),a&&(e.mealRecipes=e.mealRecipes.sort((function(e,r){return a.indexOf(e.id)-a.indexOf(r.id)}))),r.next=12;break;case 9:r.prev=9,r.t0=r["catch"](0),console.error("Error fetching meal recipes:",r.t0);case 12:return r.prev=12,e.isLoading=!1,r.finish(12);case 15:case"end":return r.stop()}}),r,null,[[0,9,12,15]])})))()},removeRecipeFromMeal:function(e){var r=this;return(0,o.Z)((0,i.Z)().mark((function t(){var a;return(0,i.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r.mealRecipes=r.mealRecipes.filter((function(r){return r.id!==e})),t.prev=1,t.next=4,l()["delete"]("".concat(r.$root.store.server_domain,"/users/meal_plan"),{data:{recipeId:String(e)},withCredentials:!0});case 4:r.$root.$emit("update-meal-count"),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](1),console.error("Error removing recipe from meal plan:",t.t0);case 10:a=r.mealRecipes.map((function(e){return e.id})),localStorage.setItem("mealRecipesOrder",JSON.stringify(a));case 12:case"end":return t.stop()}}),t,null,[[1,7]])})))()},clearMeal:function(){var e=this;return(0,o.Z)((0,i.Z)().mark((function r(){return(0,i.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,l()["delete"]("".concat(e.$root.store.server_domain,"/users/meal_plan/all"),{withCredentials:!0});case 3:e.mealRecipes=[],localStorage.removeItem("mealRecipesOrder"),e.$root.$emit("update-meal-count"),r.next=11;break;case 8:r.prev=8,r.t0=r["catch"](0),console.error("Error clearing meal plan:",r.t0);case 11:case"end":return r.stop()}}),r,null,[[0,8]])})))()},showClearMealModal:function(){this.$bvModal.show("clear-meal-modal")},onDragStart:function(e,r){this.draggingIndex=e,r.dataTransfer.effectAllowed="move"},onDragOver:function(e){e.preventDefault()},onDrop:function(e){if(e!==this.draggingIndex){var r=this.mealRecipes[this.draggingIndex];this.mealRecipes.splice(this.draggingIndex,1),this.mealRecipes.splice(e,0,r),this.draggingIndex=null;var t=this.mealRecipes.map((function(e){return e.id}));localStorage.setItem("mealRecipesOrder",JSON.stringify(t))}},onDragEnd:function(){this.draggingIndex=null},getStatusClass:function(e){return 0===e?"status-wait":e>0&&e<1?"status-process":1===e?"status-ready":""},getStatusIcon:function(e){return 0===e?"fas fa-clock":e>0&&e<1?"fas fa-spinner":1===e?"fas fa-check-circle":""},getRecipeStatusText:function(e){return 0===e?"Wait For Processing":e>0&&e<1?"In Process":1===e?"Complete!":"Wait For Processing"}}},b=h;var w=(0,g.Z)(b,a,n,!1,null,"6951a144",null);const C=w.exports},4362:(e,r,t)=>{var a=t(1589),n=Math.floor,s=function(e,r){var t=e.length,c=n(t/2);return t<8?i(e,r):o(e,s(a(e,0,c),r),s(a(e,c),r),r)},i=function(e,r){var t,a,n=e.length,s=1;while(s<n){a=s,t=e[s];while(a&&r(e[a-1],t)>0)e[a]=e[--a];a!==s++&&(e[a]=t)}return e},o=function(e,r,t,a){var n=r.length,s=t.length,i=0,o=0;while(i<n||o<s)e[i+o]=i<n&&o<s?a(r[i],t[o])<=0?r[i++]:t[o++]:i<n?r[i++]:t[o++];return e};e.exports=s},8709:(e,r,t)=>{"use strict";var a=t(9670),n=t(2140),s=TypeError;e.exports=function(e){if(a(this),"string"===e||"default"===e)e="string";else if("number"!==e)throw s("Incorrect hint");return n(this,e)}},8886:(e,r,t)=>{var a=t(8113),n=a.match(/firefox\/(\d+)/i);e.exports=!!n&&+n[1]},256:(e,r,t)=>{var a=t(8113);e.exports=/MSIE|Trident/.test(a)},8008:(e,r,t)=>{var a=t(8113),n=a.match(/AppleWebKit\/(\d+)\./);e.exports=!!n&&+n[1]},7327:(e,r,t)=>{"use strict";var a=t(2109),n=t(2092).filter,s=t(1194),i=s("filter");a({target:"Array",proto:!0,forced:!i},{filter:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})},2707:(e,r,t)=>{"use strict";var a=t(2109),n=t(1702),s=t(9662),i=t(7908),o=t(6244),c=t(5117),l=t(1340),u=t(7293),p=t(4362),d=t(9341),f=t(8886),g=t(256),v=t(7392),m=t(8008),h=[],b=n(h.sort),w=n(h.push),C=u((function(){h.sort(void 0)})),O=u((function(){h.sort(null)})),x=d("sort"),y=!u((function(){if(v)return v<70;if(!(f&&f>3)){if(g)return!0;if(m)return m<603;var e,r,t,a,n="";for(e=65;e<76;e++){switch(r=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:t=3;break;case 68:case 71:t=4;break;default:t=2}for(a=0;a<47;a++)h.push({k:r+a,v:t})}for(h.sort((function(e,r){return r.v-e.v})),a=0;a<h.length;a++)r=h[a].k.charAt(0),n.charAt(n.length-1)!==r&&(n+=r);return"DGBEFHACIJK"!==n}})),_=C||!O||!x||!y,P=function(e){return function(r,t){return void 0===t?-1:void 0===r?1:void 0!==e?+e(r,t)||0:l(r)>l(t)?1:-1}};a({target:"Array",proto:!0,forced:_},{sort:function(e){void 0!==e&&s(e);var r=i(this);if(y)return void 0===e?b(r):b(r,e);var t,a,n=[],l=o(r);for(a=0;a<l;a++)a in r&&w(n,r[a]);p(n,P(e)),t=o(n),a=0;while(a<t)r[a]=n[a++];while(a<l)c(r,a++);return r}})},6078:(e,r,t)=>{var a=t(2597),n=t(8052),s=t(8709),i=t(5112),o=i("toPrimitive"),c=Date.prototype;a(c,o)||n(c,o,s)},3321:(e,r,t)=>{var a=t(2109),n=t(9781),s=t(6048).f;a({target:"Object",stat:!0,forced:Object.defineProperties!==s,sham:!n},{defineProperties:s})},5003:(e,r,t)=>{var a=t(2109),n=t(7293),s=t(5656),i=t(1236).f,o=t(9781),c=!o||n((function(){i(1)}));a({target:"Object",stat:!0,forced:c,sham:!o},{getOwnPropertyDescriptor:function(e,r){return i(s(e),r)}})},9337:(e,r,t)=>{var a=t(2109),n=t(9781),s=t(3887),i=t(5656),o=t(1236),c=t(6135);a({target:"Object",stat:!0,sham:!n},{getOwnPropertyDescriptors:function(e){var r,t,a=i(e),n=o.f,l=s(a),u={},p=0;while(l.length>p)t=n(a,r=l[p++]),void 0!==t&&c(u,r,t);return u}})},7941:(e,r,t)=>{var a=t(2109),n=t(7908),s=t(1956),i=t(7293),o=i((function(){s(1)}));a({target:"Object",stat:!0,forced:o},{keys:function(e){return s(n(e))}})},6649:(e,r,t)=>{var a=t(6800),n=t(6532);a("toPrimitive"),n()},3144:(e,r,t)=>{"use strict";t.d(r,{Z:()=>c});t(7941),t(2526),t(7327),t(1539),t(5003),t(7658),t(9554),t(4747),t(9337),t(3321),t(9070);var a=t(3336);t(6649),t(6078),t(1817),t(1703),t(6647),t(9653);function n(e,r){if("object"!==(0,a.Z)(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,r||"default");if("object"!==(0,a.Z)(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}function s(e){var r=n(e,"string");return"symbol"===(0,a.Z)(r)?r:String(r)}function i(e,r,t){return r=s(r),r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function o(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,a)}return t}function c(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?o(Object(t),!0).forEach((function(r){i(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}}}]);
//# sourceMappingURL=706.ad204a2a.js.map